# Universal Knowledge Assistant - Setup Wizard Flow (UPDATED)

## BEFORE (AetherMUD-Specific)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 1: Welcome                  â”‚
â”‚  "Welcome to AetherMUD Assistant"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 2: Dependencies             â”‚
â”‚  âœ“ Check Ollama                     â”‚
â”‚  âœ“ Check Python packages            â”‚
â”‚  âœ“ Show available models            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 3: Configuration            â”‚
â”‚  - App name: [AetherMUD Assistant]  â”‚
â”‚  - Model: [dropdown]                â”‚
â”‚  - Codebase: [hardcoded path]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 4: Finish                   â”‚
â”‚  â˜‘ Create desktop shortcut          â”‚
â”‚  [âœ“ Setup Complete!]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AFTER (Configurable Universal)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 1: Welcome                  â”‚
â”‚  "Welcome to Universal Knowledge    â”‚
â”‚   Assistant"                        â”‚
â”‚  [Get Started â†’]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 2: Dependencies             â”‚
â”‚  â³ Checking Ollama...              â”‚
â”‚  âœ… Ollama is running               â”‚
â”‚  â³ Checking Python packages...     â”‚
â”‚  âœ… All packages installed          â”‚
â”‚  â³ Detecting Ollama models...      â”‚
â”‚  âœ… Found: qwen2.5-coder:3b,       â”‚
â”‚     qwen2.5-coder:1.5b             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 3: Configure Paths â­ NEW   â”‚
â”‚                                     â”‚
â”‚  ğŸ“ Ollama Models Location:         â”‚
â”‚  [C:\Users\itsth\.ollama\models]   â”‚
â”‚  [Browse]                           â”‚
â”‚                                     â”‚
â”‚  ğŸ—„ï¸ Vector Database Location:       â”‚
â”‚  [./chroma_db]                      â”‚
â”‚  [Browse]                           â”‚
â”‚                                     â”‚
â”‚  ğŸ“‚ Application Installation Dir:   â”‚
â”‚  [E:\LLM-Universal Knowledge...]   â”‚
â”‚  [Browse]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 4: Configuration            â”‚
â”‚  Assistant Name:                    â”‚
â”‚  [Universal Knowledge Assistant   ]  â”‚
â”‚                                     â”‚
â”‚  Model Selection:                   â”‚
â”‚  [qwen2.5-coder:3b â–¼] (deduplicated)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Next
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screen 5: Launch Options â­ UPDATEDâ”‚
â”‚                                     â”‚
â”‚  Setup Complete! âœ…                 â”‚
â”‚                                     â”‚
â”‚  â˜‘ Create desktop shortcut          â”‚
â”‚  â˜‘ Launch app after installation    â”‚
â”‚                                     â”‚
â”‚  Configuration Summary:             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Assistant: Universal Know...â”‚    â”‚
â”‚  â”‚ Models Dir: C:\Users\...   â”‚    â”‚
â”‚  â”‚ Database: ./chroma_db      â”‚    â”‚
â”‚  â”‚ Install Dir: E:\LLM-...    â”‚    â”‚
â”‚  â”‚ Model: qwen2.5-coder:3b   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  [Finish]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ If â˜‘ Create shortcut: Creates desktop icon
        â””â”€â†’ If â˜‘ Launch app: Opens GUI automatically
```

---

## KEY IMPROVEMENTS

âœ… **Configurability:**
- Users choose where models are stored
- Choose where database/indexes go
- Choose where app is installed
- All saved to config.yaml for portability

âœ… **User-Friendly:**
- Browse buttons instead of manual path entry
- Defaults provided (Windows .ollama/models)
- Summary shows all choices before completing
- Can uncheck options they don't want

âœ… **No More Hardcoding:**
- Remove: `codebase_path: E:\LLM-Assistant-Copy`
- Remove: `assets/favicon_io-AetherMUD` references
- Remove: "AetherMUD" from all titles/prompts
- Add: Dynamic config-based names

âœ… **Better Onboarding:**
- Clear 5-step flow
- Dependency checking prevents surprises
- Paths configurable upfront
- Option to launch right after setup

---

## CONFIG.YAML SAVED BY SETUP WIZARD

After completing setup, config.yaml will contain:

```yaml
assistant:
  name: Universal Knowledge Assistant  â† User can change this
  version: 1.0.0

models:
  default: qwen2.5-coder:3b  â† User selected model
  balanced: qwen2.5-coder:3b
  fast: qwen2.5-coder:1.5b

paths:
  ollama_models: C:\Users\itsth\.ollama\models  â† User chose this
  database: ./chroma_db                        â† User chose this
  install_dir: E:\LLM-Universal Knowledge... â† User chose this
  codebase: null

context:
  max_lines_per_file: 300
  context_window: 16384

ollama:
  host: http://localhost:11434
  timeout: 60

indexing:
  collection_name: universal_knowledge
  sync_on_start: true
```

---

## SCREEN NAVIGATION

```
Welcome â† User clicks "Get Started"
   â†“
Dependencies â† Automatic checks (2 buttons: Install/Download if needed)
   â†“
Paths â† NEW! User picks 3 locations with folder browsers
   â†“
Configuration â† User names app + selects model
   â†“
Finish â† User reviews summary + checks launch/shortcut options
   â†“
Complete â† Config saved, shortcut created, app launched (if checked)
```

Each screen has [Back] [Next] buttons except Welcome (no Back) and Finish (has [Finish]).

---

## NEW METHODS ADDED TO CODEBASE

### In setup_wizard.py:
- `resolve_paths()` - Convert relative paths to absolute

### In first_run_setup.pyw:
- `_create_paths_screen()` - New screen 3 UI
- `_browse_folder()` - Helper for folder picker
- `_update_finish_summary()` - Populate summary display
- Updated `_on_finish()` - Handle new path params + launch option

---

## FILES THAT REFERENCE CONFIG NOW

After patching, these files read from config.yaml:

- **gui_assistant.py** - Should read window title, database path
- **indexed_assistant.py** - Should use config collection_name, database path
- **index_codebase.py** - Should use config codebase path
- **assistant_core.py** - Reads assistant name from config

(These will need updates in next session if needed)

---

## TESTING THE NEW SETUP

**Quick Test:**
1. Delete .setup_complete file (forces rerun)
2. Run: `python first_run_setup.pyw`
3. Click through all 5 screens
4. Verify each path input appears and Browse works
5. Select a model, name the app
6. Uncheck "Launch" for first test (don't want GUI opening yet)
7. Finish
8. Check that config.yaml has paths section populated

**Full Integration Test (after other files updated):**
1. Run setup wizard (create config)
2. Verify gui_assistant.py reads title from config
3. Verify index_codebase uses config paths
4. Try indexing a codebase
5. Query the index through GUI

---

That's the complete new architecture! ğŸ¯
